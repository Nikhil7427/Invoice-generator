<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Bill Generator</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #eef1f5;
            padding: 30px;
        }

        .container {
            max-width: 900px;
            margin: auto;
            background: #ffffff;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
            border: 1px solid #ddd;
        }

        h2 {
            text-align: center;
            margin-bottom: 5px;
            letter-spacing: 1px;
        }

        h3 {
            text-align: center;
            margin-top: 0;
            color: #555;
        }

        .row {
            display: flex;
            gap: 20px;
            margin: 18px 0;
        }

        .row>div {
            flex: 1;
        }

        label {
            font-size: 13px;
            color: #374151;
            margin-bottom: 4px;
            display: block;
            font-weight: 500;
        }

        input {
            padding: 10px 12px;
            width: 100%;
            border: 1px solid #d1d5db;
            border-radius: 6px;
            font-size: 14px;
            background: #f9fafb;
            transition: border-color 0.2s, box-shadow 0.2s;
        }

        input:focus {
            outline: none;
            border-color: #2563eb;
            box-shadow: 0 0 0 2px rgba(37, 99, 235, 0.15);
            background: #ffffff;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

        th {
            background: #f3f4f6;
            padding: 10px;
            border: 1px solid #ccc;
            font-weight: 600;
        }

        td {
            border: 1px solid #ccc;
            padding: 6px;
            text-align: center;
        }

        td input {
            border: none;
            width: 100%;
            padding: 8px 6px;
            font-size: 14px;
            background: transparent;
            text-align: center;
        }

        td input:focus {
            outline: none;
            background: #eef2ff;
        }

        .right {
            text-align: right;
            font-weight: 500;
        }

        button {
            padding: 6px 12px;
            margin-top: 10px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
        }

        .add-btn {
            background: #6b7280;
            color: white;
        }

        .print-btn {
            background: #2563eb;
            color: white;
            margin-top: 20px;
        }

        .delete-btn {
            background: #ef4444;
            color: white;
        }

        .signature {
            margin-top: 50px;
            font-weight: 500;
            text-align: right;
        }

        @media print {
            button {
                display: none !important;
            }

            body {
                background: white;
                padding: 0;
            }

            input {
                border: none;
                background: transparent;
                box-shadow: none;
            }

            .container {
                box-shadow: none;
                border: none;
            }

            th:last-child,
            td:last-child {
                display: none !important;
            }

            button {
                display: none !important;
            }

            #amountWords {
                width: 100% !important;
                display: block;
            }

            #gstBreakup {
                margin-top: 10px;
                padding-left: 0;
                display: block;
                font-weight: 500;
            }

            .amount-gst-row {
                display: block !important;
            }

            .amount-gst-row>div {
                width: 100% !important;
                margin-bottom: 10px;
            }

            #gstBreakup {
                margin-top: 5px;
                padding-left: 0;
            }

            select {
                display: none !important;
            }

            .invoice-type-row {
                display: none !important;
            }


        }

        .footer {
            text-align: center;
            margin-top: 30px;
            font-style: italic;
            color: gray;
            font-size: 12px;
        }
    </style>
</head>

<body>

    <div class="container" id="bill">
        <div style="border-bottom:3px solid #2563eb; padding-bottom:15px; margin-bottom:20px;">
            <h2 style="color:#1f2937;">CK ELECTRICALS</h2>
            <h3 id="invoiceTitle" style="color:#2563eb; font-weight:500;">
                Proforma Invoice
            </h3>
            <div style="text-align:center; font-size:13px; color:#4b5563; margin-top:8px;">
                Phulpur, Prayagraj, Uttar Pradesh<br>
                üìû +91 9415920769 &nbsp; | &nbsp; ‚úâÔ∏è Chandra15274@gmail.com
            </div>
        </div>

        <div class="row">
            <div>
                <label>Bill No</label>
                <input type="text" id="billNo" placeholder="Invoice No">
            </div>
            <div>
                <label>Date</label>
                <input type="date" id="billDate" value="">
            </div>
        </div>
        <div class="row invoice-type-row">
            <div>
                <label>Invoice Type</label>
                <select id="invoiceType" onchange="changeInvoiceType()" style="
            padding:10px;
            width:100%;
            border-radius:6px;
            border:1px solid #d1d5db;
            font-size:14px;
        ">
                    <option value="proforma">Proforma Invoice</option>
                    <option value="tax">Tax Invoice</option>
                    <option value="quotation">Quotation</option>
                </select>
            </div>
        </div>


        <div class="row">
            <div>
                <label>Billed To</label>
                <input type="text" id="customer" placeholder="Customer Name">
            </div>
            <div>
                <label>Mobile</label>
                <input type="text" id="mobile" placeholder="Mobile Number">
            </div>
        </div>

        <table id="itemTable">
            <tr>
                <th>Item</th>
                <th>Qty</th>
                <th>Rate</th>
                <th>Discount %</th>
                <th>Total</th>
                <th>Action</th>
            </tr>
            <tr>
                <td><input></td>
                <td><input type="number" oninput="calc()"></td>
                <td><input type="number" oninput="calc()"></td>
                <td><input type="number" value="0" oninput="calc()"></td>
                <td class="right">0</td>
                <td><button class="delete-btn" onclick="deleteRow(this)">Delete</button></td>
            </tr>
        </table>

        <button class="add-btn" onclick="addRow()">Add Item</button>

        <div class="row" style="margin-top: 20px;">
            <div>
                <label>GST %:</label>
                <input type="number" id="gstRate" value="18" oninput="calc()">
            </div>
        </div>

        <h3 class="right" style="color:blue">Subtotal (after item discount): ‚Çπ <span id="subTotal">0</span></h3>
        <h3 class="right" style="color:blue">Grand Total (incl. GST): ‚Çπ <span id="grandTotal">0</span></h3>

        <div class="row amount-gst-row">
            <div>
                <label>Amount in Words:</label>
                <input type="text" id="amountWords" readonly>
            </div>
            <div>
                <label>GST Breakup:</label>
                <!-- <input type="text" id="gstBreakup" readonly> -->
                <div id="gstBreakup" style="font-size:14px;"></div>
            </div>
        </div>

        <div class="signature">
            Authorized Signature
        </div>

        <div class="footer" id="invoiceFooter">
            This is a computer-generated proforma invoice
        </div>


        <button class="print-btn" onclick="window.print()">Print / Save PDF</button>
    </div>

    <script>
        // ===== Invoice Type Toggle =====
        function changeInvoiceType() {
            const type = document.getElementById("invoiceType").value;
            const title = document.getElementById("invoiceTitle");
            const footer = document.getElementById("invoiceFooter");

            if (type === "tax") {
                title.innerText = "Tax Invoice";
                footer.innerText = "This is a computer-generated tax invoice";
            } else if (type === "proforma") {
                title.innerText = "Proforma Invoice";
                footer.innerText = "This is a computer-generated proforma invoice";
            } else {
                title.innerText = "Quotation";
                footer.innerText = "This is a computer-generated Quotation";
            }
        }


        // ===== Auto Bill Number =====
        // let lastBillNumber = localStorage.getItem('lastBillNumber') || 0;
        // let newBillNumber = parseInt(lastBillNumber) + 1;
        // document.getElementById('billNo').value = newBillNumber;
        // localStorage.setItem('lastBillNumber', newBillNumber);

        // ===== Set today's date =====
        document.getElementById('billDate').valueAsDate = new Date();

        // ===== Add Item Row =====
        function addRow() {
            let table = document.getElementById("itemTable");
            let row = table.insertRow();
            row.innerHTML = `
        <td><input></td>
        <td><input type="number" oninput="calc()"></td>
        <td><input type="number" oninput="calc()"></td>
        <td><input type="number" value="0" oninput="calc()"></td>
        <td class="right">0</td>
        <td><button class="delete-btn" onclick="deleteRow(this)">Delete</button></td>
    `;
        }

        // ===== Delete Item Row =====
        function deleteRow(btn) {
            let row = btn.parentNode.parentNode;
            row.parentNode.removeChild(row);
            calc(); // recalculate totals
        }

        // ===== Calculate Totals, GST & Amount in Words =====
        function calc() {
            let table = document.getElementById("itemTable");
            let subtotal = 0;

            for (let i = 1; i < table.rows.length; i++) {
                let qty = parseFloat(table.rows[i].cells[1].children[0].value) || 0;
                let rate = parseFloat(table.rows[i].cells[2].children[0].value) || 0;
                let discount = parseFloat(table.rows[i].cells[3].children[0].value) || 0;

                let total = qty * rate;
                let discountedTotal = total - (total * discount / 100);
                table.rows[i].cells[4].innerText = discountedTotal.toFixed(2);

                subtotal += discountedTotal;
            }

            document.getElementById("subTotal").innerText = subtotal.toFixed(2);

            let gstRate = parseFloat(document.getElementById("gstRate").value) || 0;
            let cgst = (subtotal * gstRate / 2 / 100).toFixed(2);
            let sgst = (subtotal * gstRate / 2 / 100).toFixed(2);

            // document.getElementById("gstBreakup").value = `CGST: ‚Çπ${cgst}, SGST: ‚Çπ${sgst}`;
            document.getElementById("gstBreakup").innerHTML =
                `CGST (${gstRate / 2}%): ‚Çπ${cgst}<br>SGST (${gstRate / 2}%): ‚Çπ${sgst}`;


            let grandTotal = subtotal + parseFloat(cgst) + parseFloat(sgst);
            document.getElementById("grandTotal").innerText = grandTotal.toFixed(2);

            document.getElementById("amountWords").value = numberToWords(Math.round(grandTotal)) + " Rupees Only";
        }

        // ===== Convert Number to Words =====
        function numberToWords(num) {
            const a = ['', 'One', 'Two', 'Three', 'Four', 'Five', 'Six', 'Seven', 'Eight', 'Nine', 'Ten', 'Eleven', 'Twelve', 'Thirteen', 'Fourteen', 'Fifteen', 'Sixteen', 'Seventeen', 'Eighteen', 'Nineteen'];
            const b = ['', '', 'Twenty', 'Thirty', 'Forty', 'Fifty', 'Sixty', 'Seventy', 'Eighty', 'Ninety'];

            if (num === 0) return 'Zero';

            function inWords(n) {
                if (n < 20) return a[n];
                if (n < 100) return b[Math.floor(n / 10)] + (n % 10 ? ' ' + a[n % 10] : '');
                if (n < 1000) return a[Math.floor(n / 100)] + ' Hundred' + (n % 100 ? ' ' + inWords(n % 100) : '');
                if (n < 100000) return inWords(Math.floor(n / 1000)) + ' Thousand' + (n % 1000 ? ' ' + inWords(n % 1000) : '');
                if (n < 10000000) return inWords(Math.floor(n / 100000)) + ' Lakh' + (n % 100000 ? ' ' + inWords(n % 100000) : '');
                return inWords(Math.floor(n / 10000000)) + ' Crore' + (n % 10000000 ? ' ' + inWords(n % 10000000) : '');
            }

            return inWords(num);
        }

        // ===== Initial Calculation =====
        calc();
    </script>

</body>

</html>